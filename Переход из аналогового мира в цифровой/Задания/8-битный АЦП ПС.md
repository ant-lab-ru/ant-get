---
тема: Переход из аналогового мира в цифровой
автор: Иван Юрьевич Потылицын
дата: 2025-10-18
задание: false
---

## Расшифровка названия задания

8-битный [[аналого-цифровой преобразователь]] [[АЦП последовательного счёта|последовательного счёта]]

## Результат

- [ ] При помощи объекта класса можно измерить напряжение на выходе [[потенциометр|потенциометра]] **U** в блоке **8-bit ADC** платы [[Печатная плата get-adc|get-adc]]
- [ ] Основной охранник модуля с описанием класса в бесконечном цикле:
    - [ ] Измеряет напряжение на выходе потенциометра
    - [ ] Печатает напряжение в терминал
    - [ ] Делает паузу на 1 секунду

> [!EXAMPLE] Пример
> 
> **Подключение осциллографа**
> 
> ![[r2r-sin-rpi.jpg]]
> 
> **Сигнал на осциллографе**
> 
> ![[r2r-sin.bmp]]

## Подготовка

1. Создайте в вашем репозитории **get** папку **get-adc**
2. В папке **get-dac** создайте файл **r2r_adc.py**
3. В созданном файле описывайте класс для реализации 8-битного [[АЦП последовательного счёта|АЦП ПП]]

## Инструкция

1. Импортируйте модули работы с GPIO и временем
2. Объявите класс **R2R_ADC** и реализуйте его обязательный конструктор со значениями аргументов по умолчанию

```
class R2R_ADC:
    def __init__(self, dynamic_range, compare_time = 0.01, verbose = False):
        self.dynamic_range = dynamic_range
        self.verbose = verbose
        self.compare_time = compare_time
        
        self.bits_gpio = [26, 20, 19, 16, 13, 12, 25, 11]
        self.comp_gpio = 21

        GPIO.setmode(GPIO.BCM)
        GPIO.setup(self.bits_gpio, GPIO.OUT, initial = 0)
        GPIO.setup(self.comp_gpio, GPIO.IN)
```

> [!HINT] Совет
> 
> Используйте возможность Python задавать аргументы функций по умолчанию.
> 
> В случае с классом **R2R_ADC** обязательным аргументом стоит оставить динамический диапазон, потому что он будет разным на каждой малинке.
> 
> По умолчанию можно задать время для работы компаратора и явный вывод отладочной информации при оцифровке напряжения.

> [!HINT] Ещё совет
> 
> Номера GPIO пинов ЦАП и номер GPIO пина, подключённого ко выходу [[Компаратор|компаратора]], меняться не будут, поэтому их можно не передавать аргументами, а задать в конструкторе.

3. Дополните класс «деструктором», который выставляет на 0 выход ЦАП и очищает настройки GPIO
4. Реализуйте метод **number_to_dac(self, number)**, который будет выдавать число **number** на вход ЦАП

> [!HINT] Совет
> 
> Используйте возможность Python задавать аргументы функций по умолчанию.
> 
> В случае с классом **R2R_ADC** обязательным аргументом стоит оставить динамический диапазон, потому что он будет разным на каждой малинке.
> 
> По умолчанию можно задать время для работы компаратора и явный вывод отладочной информации при оцифровке напряжения.