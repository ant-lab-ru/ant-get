---
тема: Переход из цифрового мира в аналоговый
автор: Анастасия Сергеевна Кузнецова
дата: 2025-09-26
aliases:
  - I2C
---
Простой текст

> [!INFO] Определение
>**I²C** — это последовательный интерфейс для связи между микроконтроллерами и периферийными устройствами (сенсорами, памятью, дисплеями и др.). 

Этот интерфейс был разработан компанией Philips  в 1980-х годах.
### Принцип работы

> [!INFO] Определение
> **SCL** или **CLOCK** (**S**ignal **CL**ock) - эта линия (провод) служит для тактирования, то есть для управления передачей данных и согласования всех устройств между собой.

> [!INFO] Определение
> **SDA** или **DATA** (**S**ignal **DA**ta) - служит для передачи данных.

Ведущий микроконтроллер (**Master**) осуществляет обмен данными с одним или несколькими периферийными устройствами (**Slave**) через двухпроводную шину: линия **SDA** отвечает за передачу данных, а линия **SCL** синхронизирует процесс обмена. Всего на одной двухпроводной шине может быть до 127 устройств.

![[I2C.png]]

Каждый сеанс передачи начинается с подачи ведущим устройства **стартового сигнала** (**Start**, или S), который также называют стартовым битом или стартовым условием. Стартовый сигнал формируется изменением уровня на линии SDA с высокого на низкий при сохранении высокого уровня на линии SCL. Соответственно, изменение уровня SDA с низкого на высокий при высоком уровне SCL формирует **стоп-сигнал** (**Stop**, или P), который обозначает завершение сеанса связи. Все события, происходящие между стартом и стопом, составляют **сообщение**, то есть саму передачу данных.

![[I2C_protocol.png]]

После формирования стартового сигнала ведущий микроконтроллер передает на шину **адрес устройства**, с которым он планирует обмениваться данными, а также указывает направление передачи: запись данных в устройство (**Master → Slave**) или чтение данных (**Slave → Master**). Адрес занимает 7 бит, а дополнительный бит определяет направление передачи. Первый байт после стартового сигнала всегда воспринимается всеми устройствами на шине как адресация.

![[I2C_packet.png]]

Все ведомые устройства на шине сверяют полученный адрес со своим. Если адрес совпадает, запрошенное устройство подтверждает готовность к обмену с помощью бита **ACK**, что сигнализирует: «Я здесь, готов к передаче». Все остальные устройства остаются пассивными. Если подтверждение не получено, ведущий понимает, что запрашиваемое устройство отсутствует или не отвечает.

Существует также бит **NACK** (No Acknowledgement), который может указывать на занятость устройства, окончание передачи или на невозможность выполнить команду.

После получения подтверждения ведущий начинает передачу данных пакетами по 8 бит (1 байт). Если осуществляется запись (**Master → Slave**), ведущий отправляет данные, а ведомое устройство отвечает битом ACK после каждого байта. Если ведётся чтение (**Master ← Slave**), ведущий ждёт данные от ведомого устройства, и после каждого байта также отправляет ACK для подтверждения получения. В конце передачи ведущий формирует NACK, сигнализируя о завершении обмена.

После передачи всех данных ведущий микроконтроллер подает **стоп-бит**, что завершает сеанс связи и освобождает шину для следующих операций.