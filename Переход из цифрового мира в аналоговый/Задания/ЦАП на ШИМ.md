---
тема: Переход из цифрового мира в аналоговый
автор: Иван Юрьевич Потылицын
дата: 2025-09-29
задание: false
---

## Результат

- [ ] При помощи скрипта можно создавать на пине **OUT** блока **PWM DAC** платы [[Печатная плата get-dac|get-dac]] аналоговое напряжение от 0.0 В до ~3.3 В

> [!EXAMPLE] Пример
> 
> **Вывод скрипта**
> 
> ![[pwm_dac.png]]
> 
> **Напряжение на мультиметре**
> 
> ![[pwm_dac-fluke.jpg]]

## Подготовка

1. В папке **get-dac** создайте файл **pwm_dac.py** и пишите в нём новый модуль

## Инструкция

1. Импортируйте модуль работы с GPIO
2. Объявите класс **PWM_DAC**, реализуйте его обязательный конструктор, «деструктор» и главный метод

```
class PWM_DAC:
    def __init__(self, gpio_pin, pwm_frequency, dynamic_range, verbose = False):
        ...
        
    def deinit(self):
        ...

    def set_voltage(self, voltage):
        ...
```

3. Реализуйте [[Основной охранник]] создаваемого модуля для работы с ЦАП на ШИМ

```
if __name__ == "__main__":
    try:
        dac = PWM_DAC(12, 500, 3.290, True)
        
        while True:
            try:
                voltage = float(input("Введите напряжение в Вольтах: "))
                dac.set_voltage(voltage)

            except ValueError:
                print("Вы ввели не число. Попробуйте ещё раз\n")

    finally:
        dac.deinit()
```

> [!HINT] Совет
> 
> Обратите внимание на то, что код основного охранника этого модуля очень похож на код в задании [[8-битный R2R ЦАП в виде класса]].
> 
> Причина в том, что эти модули реализуют одну и ту же функцию - задание напряжения на выходе ЦАП. Именно поэтому у классов **R2R_DAC** и **PWM_DAC** схожий программный интерфейс (API).
> 
> Разница в аппаратной реализации главного метода обоих классов.

## Завершение задания

1. Добавьте рабочий модуль **pwm_dac.py** в репозиторий **get**, сделайте коммит и отправьте изменения на сервер
