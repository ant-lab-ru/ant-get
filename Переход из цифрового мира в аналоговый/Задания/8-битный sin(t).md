---
тема: Переход из цифрового мира в аналоговый
автор: Иван Юрьевич Потылицын
дата: 2025-09-29
задание: false
---

## Результат

- [ ] При помощи скрипта можно создавать на пине **OUT** блока **8-bit DAC** платы [[Печатная плата get-dac|get-dac]] **синусоидальный** сигнал
- [ ] В скрипте можно задавать:
    - [ ] Амплитуду сигнала
    - [ ] Частоту сигнала
    - [ ] Частоту дискретизации сигнала

> [!EXAMPLE] Пример
> 
> **Подключение осциллографа**
> 
> ![[r2r-out.jpg]]
> 
> **Сигнал на осциллографе**
> 
> ![[r2r-sin.bmp]]

## Подготовка

1. В папке **get-dac** создайте файл **signal_generator.py** и реализуйте в нём две функции
2. В папке **get-dac** создайте файл **r2r-sin.py** и пишите в нём скрипт к этому заданию

## Инструкция (signal_generator)

1. Импортируйте модул **numpy** и **time**
2. Реализуйте функцию **get_sin_wave_amplitude(freq, time)**

> [!NOTE] Примечание
> 
> Функция **get_sin_wave_amplitude(freq, time)** принимает на вход частоту синусоидального сигнала и момент времени, в который нужно определить амплитуду сигнала.
> 
> Функция возвращает сдвинутую вверх и нормализованную форму функции $sin(2 \pi f t)$:
> - область значений от -1 до 1 сдвигается вверх и становится от 0 до 2
> - амплитуда от 0 до 2 приводится к 1 и становится от 0 до 1
> 
> Это удобно, чтобы в скриптах более высокого уровня умножать значения, полученные из этой функции на заданную амплитуду сигнала.

3. Реализуйте функцию **wait_for_sampling_period(sampling_frequency)**

> [!NOTE] Примечание
> 
> Функция **wait_for_sampling_period(sampling_frequency)** принимает на вход частоту дискретизации генерируемого сигнала и ждёт в течение одного периода дискретизации.
> 
> Если вызвать эту функцию перед генерацией следующей точки сигнала, мы получим сигнала с заданной частотой дискретизации.

## Инструкция (r2r-sin)

1. Импортируйте модули **r2r_dac**, **signal_generator** и модуль работы со временем

```
import r2r_dac as r2r
import signal_generator as sg
import time
```

2. Создайте переменные для хранения параметров генерируемого сигнала

```
amplitude = 3.2
signal_frequency = 10
sampling_frequency = 1000
```

3. В блоке **try** создайте объект класса для управления R2R-ЦАП
4. В бесконечном цикле генерируйте сигнал при помощи функций из модуля **signal_generator** и подавайте напряжения на пин **OUT** блока **8-bit DAC**
5. В блоке **finally** вызовите «деструктор» объекта класса управления R2R-ЦАП

## Завершение задания

1. Добавьте рабочие скрипт **r2r-sin.py** и модуль **signal_generator.py** в репозиторий **get**, сделайте коммит и отправьте изменения на сервер
